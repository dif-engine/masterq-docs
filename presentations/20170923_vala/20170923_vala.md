# Vala is a safe language?

Kiwamu Okabe

# There are three main platform

xxx

# World is stained with some cultures

xxx

# Culture: JVM

xxx

# Culture: .NET

xxx

# Culture: Qt

xxx

# Culture: GTK + GObject Introspection

xxx

# What's Vala?

xxx

# How to use? #1

```
$ vi hello.vala
class Demo.HelloWorld : GLib.Object {
    public static int main(string[] args) {
        stdout.printf("Hello, World\n");
        return 0;
    }
}
$ valac hello.vala
$ ./hello
Hello, World
```

# How to use? #2

```
$ valac -C hello.vala
$ cat hello.c
--snip--
#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
--snip--
int main (int argc, char ** argv) {
#if !GLIB_CHECK_VERSION (2,35,0)
        g_type_init ();
#endif
        return demo_hello_world_main (argv, argc);
}
--snip--
```

# Example: ibus-skk

xxx

# Vala is safe?

xxx

# NULL pointer dereference

xxx

# Buffer overflow

xxx

# Leak: overwrite pointer

xxx

# Leak: forget free

xxx

# Character string

xxx

# Arithmetic overflow

```
$ vi arithmetic_overflow.vala
class Demo.HelloWorld : GLib.Object {
    public static int main(string[] args) {
        int a = 1879048192;
        int b = 1879048192;
        stdout.printf("a + b = %d\n", a + b);
        return 0;
    }
}
$ valac arithmetic_overflow.vala -o app
$ ./app
a + b = -536870912
```

# Double lock

```
$ vi double_lock.vala
class Demo.HelloWorld : GLib.Object {
    public static int main(string[] args) {
        Mutex mutex = Mutex ();
        mutex.lock ();
        mutex.lock (); // <== Freeze!
        mutex.unlock ();
        return 0;
    }
}
$ valac --thread double_lock.vala -o app
$ ./app # <== Not terminate!
```

# Forget unlock

```
$ vi forget_unlock.vala
class Demo.HelloWorld : GLib.Object {
    public static int main(string[] args) {
        Mutex mutex = Mutex ();
        mutex.lock ();
        // mutex.unlock ();
        return 0;
    }
}
$ valac --thread forget_unlock.vala -o app
$ ./app 
g_mutex_clear() called on uninitialised or locked mutex
Aborted
```

# Conclusion

xxx
