# ATS programming on ESP8266

Kiwamu Okabe

# ESP8266 module
![background](img/ESP-WROOM-02.png)

* http://espressif.com/en/products/wroom/
* 32-bit low power MCU Wi-Fi Module
* Having integrated TCP/IP network stacks
* Including ADC, SDIO, UART, PWM, I2C ...
* Small form factor of only 18mm x 20mm

# ATS language
![background](img/ats_logo_on_display.png)

* http://www.ats-lang.org/
* DML-style dependent types
* Linear types
* Optional GC
* Optional malloc/free
* Optional run-time

# Demo

https://github.com/fpiot/esp8266-ats

# Demo environment

![inline](draw/demo_env.png)

# Software architecture

![inline](draw/soft_arch.png)

# Example of ATS interface

```ats
(* https://github.com/fpiot/esp8266-ats/blob/ats/SATS/ip_addr.sats *)
%{#
#ifndef ATS_SATS_IP_ADDR
#define ATS_SATS_IP_ADDR
#include "ip_addr.h"

ATSinline()
atsvoid_t0ype
ats_print_ipaddr (
  ip_addr_t ipaddr
) {
  os_printf(IPSTR, IP2STR(&ipaddr));
  return ;
}
#endif // ifndef ATS_SATS_IP_ADDR
%}

typedef ip_addr_t = $extype_struct"ip_addr_t" of { addr= uint32 }

fun print_ipaddr (ip: ip_addr_t): void = "mac#ats_print_ipaddr"
overload print with print_ipaddr
```

# Example of ATS application



# Functional IoT Meetup at December 12
![background](img/jtag_board.png)

![inline](img/fpiot_meetup.png)

# License of photos
![background](img/creative_commons.png)

```
* JTAG board 1 | Flickr - Photo Sharing!
  https://www.flickr.com/photos/amagill/2877921712/
  Copyright: Andrew Magill / License: CC BY 2.0
* Creative Commons BBB | Flickr - Photo Sharing!
  https://www.flickr.com/photos/steren/2732488224/
  Copyright: Steren Giannini / License: CC BY 2.0
```
